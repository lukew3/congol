!function o(d,r,l){function i(t,e){if(!r[t]){if(!d[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(a)return a(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=r[t]={exports:{}},d[t][0].call(n.exports,function(e){return i(d[t][1][e]||e)},n,n.exports,o,d,r,l)}return r[t].exports}for(var a="function"==typeof require&&require,e=0;e<l.length;e++)i(l[e]);return i}({1:[function(e,t,n){t.exports={baseConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:3,maxPieceCount:12,scoreLimit:100,colors:["#EDEDED","blue","red"]},local2pConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:3,maxPieceCount:12,scoreLimit:100,colors:["#EDEDED","blue","red"],speciesCount:2,startingTime:180},soloConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:-1,scoreLimit:-1,speciesCount:1,colors:["#EDEDED","black"]}}},{}],2:[function(e,t,n){const{baseConfig:o,local2pConfig:d,soloConfig:r}=e("./config.js"),{domObjs:l,initBoard:i,renderBoard:a,renderScores:s,renderRound:c,renderPieces:m,renderTimers:u}=e("./rendering.js");let g=o,y={gameOver:!1,scores:[0,0],piecesAvail:[g.startingPieceCount,g.startingPieceCount],round:0,running:!1,roundTimeouts:[],data:[],roundToggledCells:[],timers:[g.startingTime,g.startingTime]};const p=()=>{let n=[];for(let e=0;e<g.boardSize;e++){let t=[];for(let e=0;e<g.boardSize;e++)t.push(0);n.push(t)}return n},E=()=>{B(),y.data=p(),a(y.data,g.colors,g.boardSize),y.round=0,c(y.round),y.scores=[0,0],s(y.scores),y.piecesAvail=[g.startingPieceCount,g.startingPieceCount],y.timers=[g.startingTime,g.startingTime],m(g,y.piecesAvail),y.gameOver=!1,u(y.timers),h(),f(),l.playerSwitch.checked=!1},B=()=>{y.roundTimeouts.forEach(e=>{clearTimeout(e)}),y.running=!1},b=()=>{performance.now();let o,d,r;y.round++;let l=p();y.data.forEach((e,n)=>{e.forEach((e,t)=>{o=((e,t)=>{let n=[0,0],o,d=e===0?e:e-1,r=t===0?t:t-1,l=e===g.boardSize-1?e:e+1,i=t===g.boardSize-1?t:t+1;for(let t=d;t<l+1;t++)for(let e=r;e<i+1;e++){o=y.data[t][e];if(o!=0)n[o-1]+=1}if(o=y.data[e][t],o!=0)n[o-1]-=1;let a=n[0]>n[1]?1:2;return[n[0]+n[1],a]})(n,t),d=o[0],r=o[1],0!=e&&(d<2||3<d)?l[n][t]=0:0==e&&3===d?l[n][t]=r:l[n][t]=e})}),y.data=l,a(y.data,g.colors,g.boardSize),(()=>{let n=[0,0];y.data.forEach((e,t)=>{e.forEach((e,t)=>{if(e!=0)n[e-1]+=1})});let e=n[0]>n[1]?0:1;y.scores[e]+=Math.abs(n[0]-n[1]),s(y.scores)})(),s(y.scores),-1!=g.startingPieceCount&&(y.piecesAvail[0]<g.maxPieceCount&&y.piecesAvail[0]++,y.piecesAvail[1]<g.maxPieceCount&&y.piecesAvail[1]++),m(g,y.piecesAvail),c(y.round),-1!=g.scoreLimit&&(y.scores[0]>=g.scoreLimit?T(0):y.scores[1]>=g.scoreLimit&&T(1)),y.roundToggledCells=[]},f=()=>{y.timerTimeout=setTimeout(()=>{var e=l.playerSwitch.checked?1:0,t=--y.timers[e];l.timers[e].innerHTML=Math.floor(t/60)+":"+I(t%60),v(),y.gameOver||f()},1e3)},h=()=>{clearTimeout(y.timerTimeout)},I=e=>(e<10?"0":"")+e,v=()=>{y.timers.forEach((e,t)=>{0===e&&T(Math.abs(1-t))})},T=e=>{y.gameOver=!0,h(),document.getElementById("winnerMessage").style.display="block",document.getElementById("winnerMessage").innerHTML=`Player ${e+1} wins!`,document.getElementById("submitMoveButton").style.display="none",document.getElementById("resetGame2pButton").style.display="block"},S=t=>{Object.keys(t).forEach(e=>{g[e]=t[e]}),g=i(g,y.piecesAvail),E()};document.addEventListener("click",e=>{e=e.target;let t;t=null!=l.playerSwitch&&l.playerSwitch.checked?2:1,"cell"===e.className&&((e,t)=>{let n=-Number(e.id.match(/\-[0-9a-z]+$/i)[0]);var o=Math.floor(n/g.boardSize);0==y.data[o][n%g.boardSize]&&0!=y.piecesAvail[t-1]?(y.data[o][n%g.boardSize]=t,e.style.backgroundColor=g.colors[t],y.piecesAvail[t-1]--,y.roundToggledCells.push(n)):y.data[o][n%g.boardSize]==t&&y.roundToggledCells.includes(n)&&(y.data[o][n%g.boardSize]=0,e.style.backgroundColor=g.colors[0],y.piecesAvail[t-1]++,y.roundToggledCells=y.roundToggledCells.filter(e=>e!=n)),m(g,y.piecesAvail)})(e,t)}),document.getElementById("submitMoveButton").addEventListener("click",e=>{2===g.speciesCount&&(l.playerSwitch.checked=!l.playerSwitch.checked),b()}),document.getElementById("resetGame2pButton").addEventListener("click",e=>{E(),document.getElementById("submitMoveButton").style.display="block",document.getElementById("resetGame2pButton").style.display="none",document.getElementById("winnerMessage").style.display="none"}),document.getElementById("resetGameButton").addEventListener("click",e=>{E()}),document.getElementById("startStopButton").addEventListener("click",e=>{y.running?(B(),document.getElementById("startStopButton").innerHTML="Start"):((()=>{for(let e=0;e<g.totalRounds;e++)y.roundTimeouts.push(setTimeout(()=>{b()},e*g.roundTime));y.running=!0})(),document.getElementById("startStopButton").innerHTML="Stop")}),document.getElementById("nextButton").addEventListener("click",e=>{b()}),document.getElementById("resetButton").addEventListener("click",e=>{E(),document.getElementById("startStopButton").innerHTML="Start"}),y.data=p(),g=i(g,y.piecesAvail),t.exports={updateRules:S,setGameMode:e=>{switch(e){case"gt_online":S({});break;case"gt_local":document.getElementById("underBoardLower").style.display="flex",document.getElementById("p2PiecesAvail").style.display="flex",document.getElementById("p1PiecesAvail").style.display="flex",document.getElementById("local2pButtons").style.display="flex",document.getElementById("soloButtons").style.display="none",S(d);break;case"gt_solo":document.getElementById("underBoardLower").style.display="none",document.getElementById("p2PiecesAvail").style.display="none",document.getElementById("p1PiecesAvail").style.display="none",document.getElementById("local2pButtons").style.display="none",document.getElementById("soloButtons").style.display="flex",l.playerSwitch.checked=!1,S(r);break;default:console.log}}}},{"./config.js":1,"./rendering.js":3}],3:[function(e,t,n){let d={gameContainer:document.getElementById("gameContainer"),boardObj:document.getElementById("gameBoard"),roundCtr:document.getElementById("roundCounter"),scoreObjs:[document.getElementById("p1Score"),document.getElementById("p2Score")],piecesObjs:[document.getElementById("p1PiecesAvail"),document.getElementById("p2PiecesAvail")],playerSwitch:document.getElementById("switch"),timers:[document.getElementById("p1Timer"),document.getElementById("p2Timer")]};const o=(n,o)=>{if(-1!=n.startingPieceCount)for(let t=0;t<2;t++){d.piecesObjs[t].innerHTML="";for(let e=0;e<o[t];e++){let e=document.createElement("div");e.classList.add("cell"),e.style=`width: ${n.cellWH/2}px; height: ${n.cellWH/2}px; background-color: `+n.colors[t+1],d.piecesObjs[t].append(e)}}};t.exports={domObjs:d,initBoard:(n,e)=>{var t=Math.min(screen.availWidth,500);n.boardWH=t-10-(t-10)%n.boardSize,n.cellWH=n.boardWH/n.boardSize-2,d.boardObj.innerHTML="",d.boardObj.style=`width: ${n.boardWH}px; height: ${n.boardWH}px`,d.gameContainer.style=`width: ${n.boardWH}px; height: ${n.boardWH}px`;for(let t=0;t<Math.pow(n.boardSize,2);t++){let e=document.createElement("div");e.classList.add("cell"),e.id="cell-"+t,e.style=`width: ${n.cellWH}px; height: ${n.cellWH}px`,d.boardObj.append(e)}return o(n,e),d.playerSwitch.checked=!1,n},renderBoard:(e,o,d)=>{let r;e.forEach((e,n)=>{e.forEach((e,t)=>{r=document.getElementById("cell-"+(n*d+t)),r.style.backgroundColor=o[e]})})},renderScores:e=>{d.scoreObjs[0].innerHTML=e[0],d.scoreObjs[1].innerHTML=e[1]},renderRound:e=>{d.roundCtr.innerHTML=e},renderPieces:o,renderTimers:e=>{e.forEach((e,t)=>{d.timers[t].innerHTML=Math.floor(e/60)+":"+(((e=e%60)<10?"0":"")+e)})}}},{}],4:[function(e,t,n){e("./nav.js"),e("./game/game.js"),e("./newGame.js")},{"./game/game.js":2,"./nav.js":5,"./newGame.js":6}],5:[function(e,t,n){const o=e("./router.js")["setPage"];document.getElementById("navTitle").addEventListener("click",e=>{o("newGamePage")}),document.getElementById("navRules").addEventListener("click",e=>{o("rulesPage")}),document.getElementById("navPlay").addEventListener("click",e=>{o("newGamePage")})},{"./router.js":7}],6:[function(e,t,n){const{updateRules:o,setGameMode:d}=e("./game/game.js"),r=document.getElementById("gt_online"),l=document.getElementById("gt_local"),i=document.getElementById("gt_solo"),a=document.getElementById("bs_15"),s=document.getElementById("bs_25"),c=document.getElementById("bs_40");let m="gt_local",u="bs_15";const g=()=>{[r,l,i,a,s,c].forEach(e=>{e.style.border="none"}),document.getElementById(m).style.border="1px solid black",document.getElementById(u).style.border="1px solid black"};document.getElementById("newGameStartButton").addEventListener("click",()=>{document.getElementById("newGamePage").style="display: none;",document.getElementById("defaultGamePage").style="display: block;",d(m),o({boardSize:Number(u.slice(3,5))})}),document.addEventListener("click",e=>{let t=e.target;"gt_"==t.id.slice(0,3)?m=t.id:"bs_"==t.id.slice(0,3)&&(u=t.id),g()}),g()},{"./game/game.js":2}],7:[function(e,t,n){const o=document.getElementById("defaultGamePage"),d=document.getElementById("rulesPage"),r=document.getElementById("newGamePage");var l=e=>{[o,d,r].forEach(e=>{e.style="display: none;"}),document.getElementById(e).style="display: block;"};"/"!==window.location.pathname&&"/index.html"!==window.location.pathname||l("newGamePage"),t.exports={setPage:l}},{}]},{},[4]);