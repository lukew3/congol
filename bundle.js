!function o(d,l,a){function r(t,e){if(!l[t]){if(!d[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(i)return i(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=l[t]={exports:{}},d[t][0].call(n.exports,function(e){return r(d[t][1][e]||e)},n,n.exports,o,d,l,a)}return l[t].exports}for(var i="function"==typeof require&&require,e=0;e<a.length;e++)r(a[e]);return r}({1:[function(e,t,n){t.exports={defaultConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:3,maxPieceCount:12,scoreLimit:100,colors:["#EDEDED","blue","red"]}}},{}],2:[function(e,t,n){e=e("./config.js").defaultConfig;let c=e,s={scores:[0,0],piecesAvail:[c.startingPieceCount,c.startingPieceCount],round:0,running:!1,roundTimeouts:[],data:[],roundToggledCells:[]},o={gameContainer:document.getElementById("gameContainer"),boardObj:document.getElementById("gameBoard"),roundCtr:document.getElementById("roundCounter"),scoreObjs:[document.getElementById("p1Score"),document.getElementById("p2Score")],piecesObjs:[document.getElementById("p1PiecesAvail"),document.getElementById("p2PiecesAvail")],playerSwitch:document.getElementById("switch")};const r=()=>{let n=[];for(let e=0;e<c.boardSize;e++){let t=[];for(let e=0;e<c.boardSize;e++)t.push(0);n.push(t)}return n},d=()=>{var e=Math.min(screen.availWidth,500);c.boardWH=e-10-(e-10)%c.boardSize,c.cellWH=c.boardWH/c.boardSize-2,o.boardObj.innerHTML="",o.boardObj.style=`width: ${c.boardWH}px; height: ${c.boardWH}px`,o.gameContainer.style=`width: ${c.boardWH}px; height: ${c.boardWH}px`;for(let t=0;t<Math.pow(c.boardSize,2);t++){let e=document.createElement("div");e.classList.add("cell"),e.id="cell-"+t,e.style=`width: ${c.cellWH}px; height: ${c.cellWH}px`,o.boardObj.append(e)}y()},i=()=>{let o;s.data.forEach((e,n)=>{e.forEach((e,t)=>{o=document.getElementById("cell-"+(n*c.boardSize+t)),o.style.backgroundColor=c.colors[e]})})},l=()=>{a(),s.data=r(),i(),s.round=0,g(),s.scores=[0,0],m(),s.piecesAvail=[c.startingPieceCount,c.startingPieceCount],y()},a=()=>{s.roundTimeouts.forEach(e=>{clearTimeout(e)}),s.running=!1},u=()=>{performance.now();let o,d,l;s.round++;let a=r();s.data.forEach((e,n)=>{e.forEach((e,t)=>{o=((e,t)=>{let n=[0,0],o,d=e===0?e:e-1,l=t===0?t:t-1,a=e===c.boardSize-1?e:e+1,r=t===c.boardSize-1?t:t+1;for(let t=d;t<a+1;t++)for(let e=l;e<r+1;e++){o=s.data[t][e];if(o!=0)n[o-1]+=1}if(o=s.data[e][t],o!=0)n[o-1]-=1;let i=n[0]>n[1]?1:2;return[n[0]+n[1],i]})(n,t),d=o[0],l=o[1],0!=e&&(d<2||3<d)?a[n][t]=0:0==e&&3===d?a[n][t]=l:a[n][t]=e})}),s.data=a,i(),(()=>{let n=[0,0];s.data.forEach((e,t)=>{e.forEach((e,t)=>{if(e!=0)n[e-1]+=1})});let e=n[0]>n[1]?0:1;s.scores[e]+=Math.abs(n[0]-n[1]),m()})(),m(),(()=>{if(s.piecesAvail[0]<c.maxPieceCount)s.piecesAvail[0]++;if(s.piecesAvail[1]<c.maxPieceCount)s.piecesAvail[1]++})(),y(),g(),s.scores[0]>=c.scoreLimit?p(0):s.scores[1]>=c.scoreLimit&&p(1),s.roundToggledCells=[]},m=()=>{o.scoreObjs[0].innerHTML=s.scores[0],o.scoreObjs[1].innerHTML=s.scores[1]},g=()=>{o.roundCtr.innerHTML=s.round},y=()=>{for(let t=0;t<2;t++){o.piecesObjs[t].innerHTML="";for(let e=0;e<s.piecesAvail[t];e++){let e=document.createElement("div");e.classList.add("cell"),e.style=`width: ${c.cellWH/2}px; height: ${c.cellWH/2}px; background-color: `+c.colors[t+1],o.piecesObjs[t].append(e)}}},p=e=>{document.getElementById("winnerMessage").style.display="block",document.getElementById("winnerMessage").innerHTML=`Player ${e+1} wins!`,document.getElementById("submitMoveButton").style.display="none",document.getElementById("resetGameButton").style.display="block"};document.addEventListener("click",e=>{e=e.target;let t;t=null!=o.playerSwitch&&o.playerSwitch.checked?2:1,"cell"===e.className&&((e,t)=>{let n=-Number(e.id.match(/\-[0-9a-z]+$/i)[0]);var o=Math.floor(n/c.boardSize);0==s.data[o][n%c.boardSize]&&0!=s.piecesAvail[t-1]?(s.data[o][n%c.boardSize]=t,e.style.backgroundColor=c.colors[t],s.piecesAvail[t-1]--,s.roundToggledCells.push(n)):s.data[o][n%c.boardSize]==t&&s.roundToggledCells.includes(n)&&(s.data[o][n%c.boardSize]=0,e.style.backgroundColor=c.colors[0],s.piecesAvail[t-1]++,s.roundToggledCells=s.roundToggledCells.filter(e=>e!=n)),y()})(e,t)}),document.getElementById("submitMoveButton").addEventListener("click",e=>{o.playerSwitch.checked=!o.playerSwitch.checked,u()}),document.getElementById("resetGameButton").addEventListener("click",e=>{l(),document.getElementById("submitMoveButton").style.display="block",document.getElementById("resetGameButton").style.display="none",document.getElementById("winnerMessage").style.display="none"}),document.getElementById("startStopButton").addEventListener("click",e=>{s.running?(a(),document.getElementById("startStopButton").innerHTML="Start"):((()=>{for(let e=0;e<c.totalRounds;e++)s.roundTimeouts.push(setTimeout(()=>{u()},e*c.roundTime));s.running=!0})(),document.getElementById("startStopButton").innerHTML="Stop")}),document.getElementById("nextButton").addEventListener("click",e=>{u()}),document.getElementById("resetButton").addEventListener("click",e=>{l(),document.getElementById("startStopButton").innerHTML="Start"}),s.data=r(),d(),t.exports={updateRules:t=>{Object.keys(t).forEach(e=>{c[e]=t[e]}),d(),l()}}},{"./config.js":1}],3:[function(e,t,n){e("./nav.js"),e("./game.js"),e("./newGame.js")},{"./game.js":2,"./nav.js":4,"./newGame.js":5}],4:[function(e,t,n){const o=e("./router.js")["setPage"];document.getElementById("navTitle").addEventListener("click",e=>{o("defaultGamePage")}),document.getElementById("navRules").addEventListener("click",e=>{o("rulesPage")}),document.getElementById("navPlay").addEventListener("click",e=>{o("newGamePage")})},{"./router.js":6}],5:[function(e,t,n){const o=e("./game.js")["updateRules"],d=document.getElementById("gt_online"),l=document.getElementById("gt_local"),a=document.getElementById("gt_solo"),r=document.getElementById("bs_15"),i=document.getElementById("bs_25"),c=document.getElementById("bs_40");let s="gt_online",u="bs_15";document.getElementById("newGameStartButton").addEventListener("click",()=>{document.getElementById("newGamePage").style="display: none;",document.getElementById("defaultGamePage").style="display: block;",o({boardSize:Number(u.slice(3,5))})}),document.addEventListener("click",e=>{let t=e.target;"gt_"==t.id.slice(0,3)?s=t.id:"bs_"==t.id.slice(0,3)&&(u=t.id),[d,l,a,r,i,c].forEach(e=>{e.style.border="none"}),document.getElementById(s).style.border="1px solid black",document.getElementById(u).style.border="1px solid black"})},{"./game.js":2}],6:[function(e,t,n){const o=document.getElementById("defaultGamePage"),d=document.getElementById("rulesPage"),l=document.getElementById("newGamePage");"/"!==window.location.pathname&&"/index.html"!==window.location.pathname||(o.style="display: block;"),t.exports={setPage:e=>{[o,d,l].forEach(e=>{e.style="display: none;"}),document.getElementById(e).style="display: block;"}}},{}]},{},[3]);