!function o(l,d,a){function s(t,e){if(!d[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(i)return i(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=d[t]={exports:{}},l[t][0].call(n.exports,function(e){return s(l[t][1][e]||e)},n,n.exports,o,l,d,a)}return d[t].exports}for(var i="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(e,t,n){t.exports={baseConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:3,maxPieceCount:12,scoreLimit:100,colors:["#EDEDED","blue","red"]},local2pConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:3,maxPieceCount:12,scoreLimit:100,colors:["#EDEDED","blue","red"],speciesCount:2},soloConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:-1,scoreLimit:-1,speciesCount:1,colors:["#EDEDED","black"]}}},{}],2:[function(e,t,n){const{baseConfig:o,local2pConfig:l,soloConfig:d}=e("./config.js");let c=o,r={scores:[0,0],piecesAvail:[c.startingPieceCount,c.startingPieceCount],round:0,running:!1,roundTimeouts:[],data:[],roundToggledCells:[]},a={gameContainer:document.getElementById("gameContainer"),boardObj:document.getElementById("gameBoard"),roundCtr:document.getElementById("roundCounter"),scoreObjs:[document.getElementById("p1Score"),document.getElementById("p2Score")],piecesObjs:[document.getElementById("p1PiecesAvail"),document.getElementById("p2PiecesAvail")],playerSwitch:document.getElementById("switch")};const s=()=>{let n=[];for(let e=0;e<c.boardSize;e++){let t=[];for(let e=0;e<c.boardSize;e++)t.push(0);n.push(t)}return n},i=()=>{var e=Math.min(screen.availWidth,500);c.boardWH=e-10-(e-10)%c.boardSize,c.cellWH=c.boardWH/c.boardSize-2,a.boardObj.innerHTML="",a.boardObj.style=`width: ${c.boardWH}px; height: ${c.boardWH}px`,a.gameContainer.style=`width: ${c.boardWH}px; height: ${c.boardWH}px`;for(let t=0;t<Math.pow(c.boardSize,2);t++){let e=document.createElement("div");e.classList.add("cell"),e.id="cell-"+t,e.style=`width: ${c.cellWH}px; height: ${c.cellWH}px`,a.boardObj.append(e)}B(),a.playerSwitch.checked=!1},u=()=>{let o;r.data.forEach((e,n)=>{e.forEach((e,t)=>{o=document.getElementById("cell-"+(n*c.boardSize+t)),o.style.backgroundColor=c.colors[e]})})},m=()=>{g(),r.data=s(),u(),r.round=0,E(),r.scores=[0,0],p(),r.piecesAvail=[c.startingPieceCount,c.startingPieceCount],B()},g=()=>{r.roundTimeouts.forEach(e=>{clearTimeout(e)}),r.running=!1},y=()=>{performance.now();let o,l,d;r.round++;let a=s();r.data.forEach((e,n)=>{e.forEach((e,t)=>{o=((e,t)=>{let n=[0,0],o,l=e===0?e:e-1,d=t===0?t:t-1,a=e===c.boardSize-1?e:e+1,s=t===c.boardSize-1?t:t+1;for(let t=l;t<a+1;t++)for(let e=d;e<s+1;e++){o=r.data[t][e];if(o!=0)n[o-1]+=1}if(o=r.data[e][t],o!=0)n[o-1]-=1;let i=n[0]>n[1]?1:2;return[n[0]+n[1],i]})(n,t),l=o[0],d=o[1],0!=e&&(l<2||3<l)?a[n][t]=0:0==e&&3===l?a[n][t]=d:a[n][t]=e})}),r.data=a,u(),(()=>{let n=[0,0];r.data.forEach((e,t)=>{e.forEach((e,t)=>{if(e!=0)n[e-1]+=1})});let e=n[0]>n[1]?0:1;r.scores[e]+=Math.abs(n[0]-n[1]),p()})(),p(),-1!=c.startingPieceCount&&(r.piecesAvail[0]<c.maxPieceCount&&r.piecesAvail[0]++,r.piecesAvail[1]<c.maxPieceCount&&r.piecesAvail[1]++),B(),E(),-1!=c.scoreLimit&&(r.scores[0]>=c.scoreLimit?b(0):r.scores[1]>=c.scoreLimit&&b(1)),r.roundToggledCells=[]},p=()=>{a.scoreObjs[0].innerHTML=r.scores[0],a.scoreObjs[1].innerHTML=r.scores[1]},E=()=>{a.roundCtr.innerHTML=r.round},B=()=>{if(-1!=c.startingPieceCount)for(let t=0;t<2;t++){a.piecesObjs[t].innerHTML="";for(let e=0;e<r.piecesAvail[t];e++){let e=document.createElement("div");e.classList.add("cell"),e.style=`width: ${c.cellWH/2}px; height: ${c.cellWH/2}px; background-color: `+c.colors[t+1],a.piecesObjs[t].append(e)}}},b=e=>{document.getElementById("winnerMessage").style.display="block",document.getElementById("winnerMessage").innerHTML=`Player ${e+1} wins!`,document.getElementById("submitMoveButton").style.display="none",document.getElementById("resetGame2pButton").style.display="block"},f=t=>{Object.keys(t).forEach(e=>{c[e]=t[e]}),i(),m()};document.addEventListener("click",e=>{e=e.target;let t;t=null!=a.playerSwitch&&a.playerSwitch.checked?2:1,"cell"===e.className&&((e,t)=>{let n=-Number(e.id.match(/\-[0-9a-z]+$/i)[0]);var o=Math.floor(n/c.boardSize);0==r.data[o][n%c.boardSize]&&0!=r.piecesAvail[t-1]?(r.data[o][n%c.boardSize]=t,e.style.backgroundColor=c.colors[t],r.piecesAvail[t-1]--,r.roundToggledCells.push(n)):r.data[o][n%c.boardSize]==t&&r.roundToggledCells.includes(n)&&(r.data[o][n%c.boardSize]=0,e.style.backgroundColor=c.colors[0],r.piecesAvail[t-1]++,r.roundToggledCells=r.roundToggledCells.filter(e=>e!=n)),B()})(e,t)}),document.getElementById("submitMoveButton").addEventListener("click",e=>{2===c.speciesCount&&(a.playerSwitch.checked=!a.playerSwitch.checked),console.log(c.speciesCount),y()}),document.getElementById("resetGame2pButton").addEventListener("click",e=>{m(),document.getElementById("submitMoveButton").style.display="block",document.getElementById("resetGame2pButton").style.display="none",document.getElementById("winnerMessage").style.display="none"}),document.getElementById("resetGameButton").addEventListener("click",e=>{m()}),document.getElementById("startStopButton").addEventListener("click",e=>{r.running?(g(),document.getElementById("startStopButton").innerHTML="Start"):((()=>{for(let e=0;e<c.totalRounds;e++)r.roundTimeouts.push(setTimeout(()=>{y()},e*c.roundTime));r.running=!0})(),document.getElementById("startStopButton").innerHTML="Stop")}),document.getElementById("nextButton").addEventListener("click",e=>{y()}),document.getElementById("resetButton").addEventListener("click",e=>{m(),document.getElementById("startStopButton").innerHTML="Start"}),r.data=s(),i(),t.exports={updateRules:f,setGameMode:e=>{switch(e){case"gt_online":f({});break;case"gt_local":document.getElementById("underBoardLower").style.display="flex",document.getElementById("p2PiecesAvail").style.display="flex",document.getElementById("p1PiecesAvail").style.display="flex",document.getElementById("local2pButtons").style.display="flex",document.getElementById("soloButtons").style.display="none",f(l);break;case"gt_solo":document.getElementById("underBoardLower").style.display="none",document.getElementById("p2PiecesAvail").style.display="none",document.getElementById("p1PiecesAvail").style.display="none",document.getElementById("local2pButtons").style.display="none",document.getElementById("soloButtons").style.display="flex",a.playerSwitch.checked=!1,f(d);break;default:console.log}}}},{"./config.js":1}],3:[function(e,t,n){e("./nav.js"),e("./game.js"),e("./newGame.js")},{"./game.js":2,"./nav.js":4,"./newGame.js":5}],4:[function(e,t,n){const o=e("./router.js")["setPage"];document.getElementById("navTitle").addEventListener("click",e=>{o("defaultGamePage")}),document.getElementById("navRules").addEventListener("click",e=>{o("rulesPage")}),document.getElementById("navPlay").addEventListener("click",e=>{o("newGamePage")})},{"./router.js":6}],5:[function(e,t,n){const{updateRules:o,setGameMode:l}=e("./game.js"),d=document.getElementById("gt_online"),a=document.getElementById("gt_local"),s=document.getElementById("gt_solo"),i=document.getElementById("bs_15"),c=document.getElementById("bs_25"),r=document.getElementById("bs_40");let u="gt_local",m="bs_15";const g=()=>{[d,a,s,i,c,r].forEach(e=>{e.style.border="none"}),document.getElementById(u).style.border="1px solid black",document.getElementById(m).style.border="1px solid black"};document.getElementById("newGameStartButton").addEventListener("click",()=>{document.getElementById("newGamePage").style="display: none;",document.getElementById("defaultGamePage").style="display: block;",l(u),o({boardSize:Number(m.slice(3,5))})}),document.addEventListener("click",e=>{let t=e.target;"gt_"==t.id.slice(0,3)?u=t.id:"bs_"==t.id.slice(0,3)&&(m=t.id),g()}),g()},{"./game.js":2}],6:[function(e,t,n){const o=document.getElementById("defaultGamePage"),l=document.getElementById("rulesPage"),d=document.getElementById("newGamePage");var a=e=>{[o,l,d].forEach(e=>{e.style="display: none;"}),document.getElementById(e).style="display: block;"};"/"!==window.location.pathname&&"/index.html"!==window.location.pathname||a("newGamePage"),t.exports={setPage:a}},{}]},{},[3]);