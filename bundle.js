!function n(o,r,s){function d(t,e){if(!r[t]){if(!o[t]){var a="function"==typeof require&&require;if(!e&&a)return a(t,!0);if(l)return l(t,!0);throw(a=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",a}a=r[t]={exports:{}},o[t][0].call(a.exports,function(e){return d(o[t][1][e]||e)},a,a.exports,n,o,r,s)}return r[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)d(s[e]);return d}({1:[function(e,t,a){t.exports={baseConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:3,maxPieceCount:12,scoreLimit:100,colors:["#EDEDED","blue","red"]},local2pConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:3,maxPieceCount:12,scoreLimit:100,colors:["#EDEDED","blue","red"],speciesCount:2,startingTime:180},soloConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:-1,scoreLimit:-1,speciesCount:1,colors:["#EDEDED","black"]}}},{}],2:[function(e,t,a){e=e("./config.js").baseConfig;let n=e,o={gameOver:!1,scores:[0,0],piecesAvail:[n.startingPieceCount,n.startingPieceCount],round:0,running:!1,roundTimeouts:[],data:[],roundToggledCells:[],timers:[n.startingTime,n.startingTime]};t.exports={getRules:()=>n,getGameVars:()=>o,updateRules:t=>{Object.keys(t).forEach(e=>{n[e]=t[e]})},updateGameVars:t=>{Object.keys(t).forEach(e=>{o[e]=t[e]})}}},{"./config.js":1}],3:[function(e,t,a){const i=e("./data.js"),d=e("./rendering.js"),{local2pConfig:n,soloConfig:o}=e("./config.js"),l=()=>{let a=[];for(let e=0;e<i.getRules().boardSize;e++){let t=[];for(let e=0;e<i.getRules().boardSize;e++)t.push(0);a.push(t)}return a},r=()=>{s(),i.updateGameVars({data:l()}),d.renderBoard(),i.updateGameVars({round:0}),d.renderRound(),i.updateGameVars({scores:[0,0]}),d.renderScores(),i.updateGameVars({piecesAvail:[i.getRules().startingPieceCount,i.getRules().startingPieceCount]}),i.updateGameVars({timers:[i.getRules().startingTime,i.getRules().startingTime]}),d.renderPieces(),i.updateGameVars({gameOver:!1}),d.renderTimers(),u(),m(),d.domObjs.playerSwitch.checked=!1},s=()=>{i.getGameVars().roundTimeouts.forEach(e=>{clearTimeout(e)}),i.updateGameVars({running:!1})},c=()=>{performance.now();let n,o,r;i.updateGameVars({round:i.getGameVars().round+1});let s=l();i.getGameVars().data.forEach((e,a)=>{e.forEach((e,t)=>{n=((e,t)=>{let a=[0,0],n,o=e===0?e:e-1,r=t===0?t:t-1,s=e===i.getRules().boardSize-1?e:e+1,d=t===i.getRules().boardSize-1?t:t+1;for(let t=o;t<s+1;t++)for(let e=r;e<d+1;e++){n=i.getGameVars().data[t][e];if(n!=0)a[n-1]+=1}if(n=i.getGameVars().data[e][t],n!=0)a[n-1]-=1;let l=a[0]>a[1]?1:2;return[a[0]+a[1],l]})(a,t),o=n[0],r=n[1],0!=e&&(o<2||3<o)?s[a][t]=0:0==e&&3===o?s[a][t]=r:s[a][t]=e})}),i.updateGameVars({data:s}),d.renderBoard(),(()=>{let a=[0,0];i.getGameVars().data.forEach((e,t)=>{e.forEach((e,t)=>{if(e!=0)a[e-1]+=1})});let e=a[0]>a[1]?0:1,t=i.getGameVars();t.scores[e]+=Math.abs(a[0]-a[1]),i.updateGameVars(t),d.renderScores()})(),d.renderScores(),(()=>{if(-1!=i.getRules().startingPieceCount){let e=i.getGameVars();i.getGameVars().piecesAvail[0]<i.getRules().maxPieceCount&&e.piecesAvail[0]++,i.getGameVars().piecesAvail[1]<i.getRules().maxPieceCount&&e.piecesAvail[1]++,i.updateGameVars(e)}})(),d.renderPieces(),d.renderRound(),-1!=i.getRules().scoreLimit&&(i.getGameVars().scores[0]>=i.getRules().scoreLimit?y(0):i.getGameVars().scores[1]>=i.getRules().scoreLimit&&y(1)),i.updateGameVars({roundToggledCells:[]})},m=()=>{i.getGameVars().timerTimeout=setTimeout(()=>{var e=d.domObjs.playerSwitch.checked?1:0;let t=i.getGameVars();var a=--t.timers[e];i.updateGameVars(t),d.domObjs.timers[e].innerHTML=Math.floor(a/60)+":"+g(a%60),p(),i.getGameVars().gameOver||m()},1e3)},u=()=>{clearTimeout(i.getGameVars().timerTimeout)},g=e=>(e<10?"0":"")+e,p=()=>{i.getGameVars().timers.forEach((e,t)=>{0===e&&y(Math.abs(1-t))})},y=e=>{i.updateGameVars({gameOver:!0}),u(),document.getElementById("winnerMessage").style.display="block",document.getElementById("winnerMessage").innerHTML=`Player ${e+1} wins!`,document.getElementById("submitMoveButton").style.display="none",document.getElementById("resetGame2pButton").style.display="block"};document.addEventListener("click",e=>{e=e.target;let t;t=null!=d.domObjs.playerSwitch&&d.domObjs.playerSwitch.checked?2:1,"cell"===e.className&&((e,t)=>{let a=-Number(e.id.match(/\-[0-9a-z]+$/i)[0]);var n=Math.floor(a/i.getRules().boardSize);let o=i.getGameVars();0==o.data[n][a%i.getRules().boardSize]&&0!=o.piecesAvail[t-1]?(o.data[n][a%i.getRules().boardSize]=t,e.style.backgroundColor=i.getRules().colors[t],o.piecesAvail[t-1]--,o.roundToggledCells.push(a)):i.getGameVars().data[n][a%i.getRules().boardSize]==t&&i.getGameVars().roundToggledCells.includes(a)&&(o.data[n][a%i.getRules().boardSize]=0,e.style.backgroundColor=i.getRules().colors[0],o.piecesAvail[t-1]++,o.roundToggledCells=i.getGameVars().roundToggledCells.filter(e=>e!=a)),i.updateGameVars(o),d.renderPieces()})(e,t)}),document.getElementById("submitMoveButton").addEventListener("click",e=>{2===i.getRules().speciesCount&&(d.domObjs.playerSwitch.checked=!d.domObjs.playerSwitch.checked),c()}),document.getElementById("resetGame2pButton").addEventListener("click",e=>{r(),document.getElementById("submitMoveButton").style.display="block",document.getElementById("resetGame2pButton").style.display="none",document.getElementById("winnerMessage").style.display="none"}),document.getElementById("resetGameButton").addEventListener("click",e=>{r()}),document.getElementById("startStopButton").addEventListener("click",e=>{i.getGameVars().running?(s(),document.getElementById("startStopButton").innerHTML="Start"):((()=>{for(let e=0;e<i.getRules().totalRounds;e++)i.getGameVars().roundTimeouts.push(setTimeout(()=>{c()},e*i.getRules().roundTime));i.updateGameVars({running:!0})})(),document.getElementById("startStopButton").innerHTML="Stop")}),document.getElementById("nextButton").addEventListener("click",e=>{c()}),document.getElementById("resetButton").addEventListener("click",e=>{r(),document.getElementById("startStopButton").innerHTML="Start"}),i.updateGameVars({data:l()}),i.updateRules(d.initBoard()),t.exports={setGameMode:e=>{switch(e){case"gt_online":i.updateRules({});break;case"gt_local":document.getElementById("underBoardLower").style.display="flex",document.getElementById("p2PiecesAvail").style.display="flex",document.getElementById("p1PiecesAvail").style.display="flex",document.getElementById("local2pButtons").style.display="flex",document.getElementById("soloButtons").style.display="none",i.updateRules(n);break;case"gt_solo":document.getElementById("underBoardLower").style.display="none",document.getElementById("p2PiecesAvail").style.display="none",document.getElementById("p1PiecesAvail").style.display="none",document.getElementById("local2pButtons").style.display="none",document.getElementById("soloButtons").style.display="flex",d.domObjs.playerSwitch.checked=!1,i.updateRules(o);break;default:console.log}},resetBoard:r}},{"./config.js":1,"./data.js":2,"./rendering.js":4}],4:[function(e,t,a){const s=e("./data.js");let o={gameContainer:document.getElementById("gameContainer"),boardObj:document.getElementById("gameBoard"),roundCtr:document.getElementById("roundCounter"),scoreObjs:[document.getElementById("p1Score"),document.getElementById("p2Score")],piecesObjs:[document.getElementById("p1PiecesAvail"),document.getElementById("p2PiecesAvail")],playerSwitch:document.getElementById("switch"),timers:[document.getElementById("p1Timer"),document.getElementById("p2Timer")]};const n=()=>{var a=s.getRules(),n=s.getGameVars().piecesAvail;if(-1!=a.startingPieceCount)for(let t=0;t<2;t++){o.piecesObjs[t].innerHTML="";for(let e=0;e<n[t];e++){let e=document.createElement("div");e.classList.add("cell"),e.style=`width: ${a.cellWH/2}px; height: ${a.cellWH/2}px; background-color: `+a.colors[t+1],o.piecesObjs[t].append(e)}}};t.exports={domObjs:o,initBoard:()=>{let a=s.getRules();s.getGameVars().piecesAvail;var e=Math.min(screen.availWidth,500);a.boardWH=e-10-(e-10)%a.boardSize,a.cellWH=a.boardWH/a.boardSize-2,o.boardObj.innerHTML="",o.boardObj.style=`width: ${a.boardWH}px; height: ${a.boardWH}px`,o.gameContainer.style=`width: ${a.boardWH}px; height: ${a.boardWH}px`;for(let t=0;t<Math.pow(a.boardSize,2);t++){let e=document.createElement("div");e.classList.add("cell"),e.id="cell-"+t,e.style=`width: ${a.cellWH}px; height: ${a.cellWH}px`,o.boardObj.append(e)}return n(a),o.playerSwitch.checked=!1,a},renderBoard:()=>{let e=s.getGameVars().data,n=s.getRules().colors,o=s.getRules().boardSize,r;e.forEach((e,a)=>{e.forEach((e,t)=>{r=document.getElementById("cell-"+(a*o+t)),r.style.backgroundColor=n[e]})})},renderScores:()=>{var e=s.getGameVars().scores;o.scoreObjs[0].innerHTML=e[0],o.scoreObjs[1].innerHTML=e[1]},renderRound:()=>{var e=s.getGameVars().round;o.roundCtr.innerHTML=e},renderPieces:n,renderTimers:()=>{s.getGameVars().timers.forEach((e,t)=>{o.timers[t].innerHTML=Math.floor(e/60)+":"+(((e=e%60)<10?"0":"")+e)})}}},{"./data.js":2}],5:[function(e,t,a){e("./nav.js"),e("./game/game.js"),e("./newGame.js")},{"./game/game.js":3,"./nav.js":6,"./newGame.js":7}],6:[function(e,t,a){const n=e("./router.js")["setPage"];document.getElementById("navTitle").addEventListener("click",e=>{n("newGamePage")}),document.getElementById("navRules").addEventListener("click",e=>{n("rulesPage")}),document.getElementById("navPlay").addEventListener("click",e=>{n("newGamePage")})},{"./router.js":8}],7:[function(e,t,a){const n=e("./game/game.js"),o=e("./game/data.js"),r=document.getElementById("gt_online"),s=document.getElementById("gt_local"),d=document.getElementById("gt_solo"),l=document.getElementById("bs_15"),i=document.getElementById("bs_25"),c=document.getElementById("bs_40");let m="gt_local",u="bs_15";const g=()=>{[r,s,d,l,i,c].forEach(e=>{e.style.border="none"}),document.getElementById(m).style.border="1px solid black",document.getElementById(u).style.border="1px solid black"};document.getElementById("newGameStartButton").addEventListener("click",()=>{document.getElementById("newGamePage").style="display: none;",document.getElementById("defaultGamePage").style="display: block;",n.setGameMode(m),o.updateRules({boardSize:Number(u.slice(3,5))}),n.resetBoard()}),document.addEventListener("click",e=>{let t=e.target;"gt_"==t.id.slice(0,3)?m=t.id:"bs_"==t.id.slice(0,3)&&(u=t.id),g()}),g()},{"./game/data.js":2,"./game/game.js":3}],8:[function(e,t,a){const n=document.getElementById("defaultGamePage"),o=document.getElementById("rulesPage"),r=document.getElementById("newGamePage");var s=e=>{[n,o,r].forEach(e=>{e.style="display: none;"}),document.getElementById(e).style="display: block;"};"/"!==window.location.pathname&&"/index.html"!==window.location.pathname||s("newGamePage"),t.exports={setPage:s}},{}]},{},[5]);