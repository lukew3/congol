!function o(l,d,i){function a(t,e){if(!d[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(r)return r(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=d[t]={exports:{}},l[t][0].call(n.exports,function(e){return a(l[t][1][e]||e)},n,n.exports,o,l,d,i)}return d[t].exports}for(var r="function"==typeof require&&require,e=0;e<i.length;e++)a(i[e]);return a}({1:[function(e,t,n){t.exports={baseConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:3,maxPieceCount:12,scoreLimit:100,colors:["#EDEDED","blue","red"]},local2pConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:3,maxPieceCount:12,scoreLimit:100,colors:["#EDEDED","blue","red"],speciesCount:2,startingTime:180},soloConfig:{boardSize:15,totalRounds:100,roundTime:1e3,startingPieceCount:-1,scoreLimit:-1,speciesCount:1,colors:["#EDEDED","black"]}}},{}],2:[function(e,t,n){const{baseConfig:o,local2pConfig:l,soloConfig:d}=e("./config.js");let s=o,c={gameOver:!1,scores:[0,0],piecesAvail:[s.startingPieceCount,s.startingPieceCount],round:0,running:!1,roundTimeouts:[],data:[],roundToggledCells:[],timers:[s.startingTime,s.startingTime]},i={gameContainer:document.getElementById("gameContainer"),boardObj:document.getElementById("gameBoard"),roundCtr:document.getElementById("roundCounter"),scoreObjs:[document.getElementById("p1Score"),document.getElementById("p2Score")],piecesObjs:[document.getElementById("p1PiecesAvail"),document.getElementById("p2PiecesAvail")],playerSwitch:document.getElementById("switch"),timers:[document.getElementById("p1Timer"),document.getElementById("p2Timer")]};const a=()=>{let n=[];for(let e=0;e<s.boardSize;e++){let t=[];for(let e=0;e<s.boardSize;e++)t.push(0);n.push(t)}return n},r=()=>{var e=Math.min(screen.availWidth,500);s.boardWH=e-10-(e-10)%s.boardSize,s.cellWH=s.boardWH/s.boardSize-2,i.boardObj.innerHTML="",i.boardObj.style=`width: ${s.boardWH}px; height: ${s.boardWH}px`,i.gameContainer.style=`width: ${s.boardWH}px; height: ${s.boardWH}px`;for(let t=0;t<Math.pow(s.boardSize,2);t++){let e=document.createElement("div");e.classList.add("cell"),e.id="cell-"+t,e.style=`width: ${s.cellWH}px; height: ${s.cellWH}px`,i.boardObj.append(e)}I(),i.playerSwitch.checked=!1},m=()=>{let o;c.data.forEach((e,n)=>{e.forEach((e,t)=>{o=document.getElementById("cell-"+(n*s.boardSize+t)),o.style.backgroundColor=s.colors[e]})})},u=()=>{g(),c.data=a(),m(),c.round=0,h(),c.scores=[0,0],f(),c.piecesAvail=[s.startingPieceCount,s.startingPieceCount],c.timers=[s.startingTime,s.startingTime],I(),c.gameOver=!1,c.timers.forEach((e,t)=>{i.timers[t].innerHTML=Math.floor(e/60)+":"+B(e%60)}),E(),p()},g=()=>{c.roundTimeouts.forEach(e=>{clearTimeout(e)}),c.running=!1},y=()=>{performance.now();let o,l,d;c.round++;let i=a();c.data.forEach((e,n)=>{e.forEach((e,t)=>{o=((e,t)=>{let n=[0,0],o,l=e===0?e:e-1,d=t===0?t:t-1,i=e===s.boardSize-1?e:e+1,a=t===s.boardSize-1?t:t+1;for(let t=l;t<i+1;t++)for(let e=d;e<a+1;e++){o=c.data[t][e];if(o!=0)n[o-1]+=1}if(o=c.data[e][t],o!=0)n[o-1]-=1;let r=n[0]>n[1]?1:2;return[n[0]+n[1],r]})(n,t),l=o[0],d=o[1],0!=e&&(l<2||3<l)?i[n][t]=0:0==e&&3===l?i[n][t]=d:i[n][t]=e})}),c.data=i,m(),(()=>{let n=[0,0];c.data.forEach((e,t)=>{e.forEach((e,t)=>{if(e!=0)n[e-1]+=1})});let e=n[0]>n[1]?0:1;c.scores[e]+=Math.abs(n[0]-n[1]),f()})(),f(),-1!=s.startingPieceCount&&(c.piecesAvail[0]<s.maxPieceCount&&c.piecesAvail[0]++,c.piecesAvail[1]<s.maxPieceCount&&c.piecesAvail[1]++),I(),h(),-1!=s.scoreLimit&&(c.scores[0]>=s.scoreLimit?v(0):c.scores[1]>=s.scoreLimit&&v(1)),c.roundToggledCells=[]},p=()=>{c.timerTimeout=setTimeout(()=>{var e=i.playerSwitch.checked?1:0,t=--c.timers[e];i.timers[e].innerHTML=Math.floor(t/60)+":"+B(t%60),b(),c.gameOver||p()},1e3)},E=()=>{console.log("stopping timer"),clearTimeout(c.timerTimeout)},B=e=>(e<10?"0":"")+e,b=()=>{c.timers.forEach((e,t)=>{0===e&&v(Math.abs(1-t))})},f=()=>{i.scoreObjs[0].innerHTML=c.scores[0],i.scoreObjs[1].innerHTML=c.scores[1]},h=()=>{i.roundCtr.innerHTML=c.round},I=()=>{if(-1!=s.startingPieceCount)for(let t=0;t<2;t++){i.piecesObjs[t].innerHTML="";for(let e=0;e<c.piecesAvail[t];e++){let e=document.createElement("div");e.classList.add("cell"),e.style=`width: ${s.cellWH/2}px; height: ${s.cellWH/2}px; background-color: `+s.colors[t+1],i.piecesObjs[t].append(e)}}},v=e=>{c.gameOver=!0,E(),document.getElementById("winnerMessage").style.display="block",document.getElementById("winnerMessage").innerHTML=`Player ${e+1} wins!`,document.getElementById("submitMoveButton").style.display="none",document.getElementById("resetGame2pButton").style.display="block"},C=t=>{Object.keys(t).forEach(e=>{s[e]=t[e]}),r(),u()};document.addEventListener("click",e=>{e=e.target;let t;t=null!=i.playerSwitch&&i.playerSwitch.checked?2:1,"cell"===e.className&&((e,t)=>{let n=-Number(e.id.match(/\-[0-9a-z]+$/i)[0]);var o=Math.floor(n/s.boardSize);0==c.data[o][n%s.boardSize]&&0!=c.piecesAvail[t-1]?(c.data[o][n%s.boardSize]=t,e.style.backgroundColor=s.colors[t],c.piecesAvail[t-1]--,c.roundToggledCells.push(n)):c.data[o][n%s.boardSize]==t&&c.roundToggledCells.includes(n)&&(c.data[o][n%s.boardSize]=0,e.style.backgroundColor=s.colors[0],c.piecesAvail[t-1]++,c.roundToggledCells=c.roundToggledCells.filter(e=>e!=n)),I()})(e,t)}),document.getElementById("submitMoveButton").addEventListener("click",e=>{2===s.speciesCount&&(i.playerSwitch.checked=!i.playerSwitch.checked),console.log(s.speciesCount),y()}),document.getElementById("resetGame2pButton").addEventListener("click",e=>{u(),document.getElementById("submitMoveButton").style.display="block",document.getElementById("resetGame2pButton").style.display="none",document.getElementById("winnerMessage").style.display="none"}),document.getElementById("resetGameButton").addEventListener("click",e=>{u()}),document.getElementById("startStopButton").addEventListener("click",e=>{c.running?(g(),document.getElementById("startStopButton").innerHTML="Start"):((()=>{for(let e=0;e<s.totalRounds;e++)c.roundTimeouts.push(setTimeout(()=>{y()},e*s.roundTime));c.running=!0})(),document.getElementById("startStopButton").innerHTML="Stop")}),document.getElementById("nextButton").addEventListener("click",e=>{y()}),document.getElementById("resetButton").addEventListener("click",e=>{u(),document.getElementById("startStopButton").innerHTML="Start"}),c.data=a(),r(),t.exports={updateRules:C,setGameMode:e=>{switch(e){case"gt_online":C({});break;case"gt_local":document.getElementById("underBoardLower").style.display="flex",document.getElementById("p2PiecesAvail").style.display="flex",document.getElementById("p1PiecesAvail").style.display="flex",document.getElementById("local2pButtons").style.display="flex",document.getElementById("soloButtons").style.display="none",C(l);break;case"gt_solo":document.getElementById("underBoardLower").style.display="none",document.getElementById("p2PiecesAvail").style.display="none",document.getElementById("p1PiecesAvail").style.display="none",document.getElementById("local2pButtons").style.display="none",document.getElementById("soloButtons").style.display="flex",i.playerSwitch.checked=!1,C(d);break;default:console.log}}}},{"./config.js":1}],3:[function(e,t,n){e("./nav.js"),e("./game.js"),e("./newGame.js")},{"./game.js":2,"./nav.js":4,"./newGame.js":5}],4:[function(e,t,n){const o=e("./router.js")["setPage"];document.getElementById("navTitle").addEventListener("click",e=>{o("newGamePage")}),document.getElementById("navRules").addEventListener("click",e=>{o("rulesPage")}),document.getElementById("navPlay").addEventListener("click",e=>{o("newGamePage")})},{"./router.js":6}],5:[function(e,t,n){const{updateRules:o,setGameMode:l}=e("./game.js"),d=document.getElementById("gt_online"),i=document.getElementById("gt_local"),a=document.getElementById("gt_solo"),r=document.getElementById("bs_15"),s=document.getElementById("bs_25"),c=document.getElementById("bs_40");let m="gt_local",u="bs_15";const g=()=>{[d,i,a,r,s,c].forEach(e=>{e.style.border="none"}),document.getElementById(m).style.border="1px solid black",document.getElementById(u).style.border="1px solid black"};document.getElementById("newGameStartButton").addEventListener("click",()=>{document.getElementById("newGamePage").style="display: none;",document.getElementById("defaultGamePage").style="display: block;",l(m),o({boardSize:Number(u.slice(3,5))})}),document.addEventListener("click",e=>{let t=e.target;"gt_"==t.id.slice(0,3)?m=t.id:"bs_"==t.id.slice(0,3)&&(u=t.id),g()}),g()},{"./game.js":2}],6:[function(e,t,n){const o=document.getElementById("defaultGamePage"),l=document.getElementById("rulesPage"),d=document.getElementById("newGamePage");var i=e=>{[o,l,d].forEach(e=>{e.style="display: none;"}),document.getElementById(e).style="display: block;"};"/"!==window.location.pathname&&"/index.html"!==window.location.pathname||i("newGamePage"),t.exports={setPage:i}},{}]},{},[3]);